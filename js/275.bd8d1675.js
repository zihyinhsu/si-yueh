(self["webpackChunksi_yueh"]=self["webpackChunksi_yueh"]||[]).push([[275],{2705:function(t,e,i){var o=i(5639),s=o.Symbol;t.exports=s},4239:function(t,e,i){var o=i(2705),s=i(9607),n=i(2333),r="[object Null]",a="[object Undefined]",c=o?o.toStringTag:void 0;function u(t){return null==t?void 0===t?a:r:c&&c in Object(t)?s(t):n(t)}t.exports=u},7561:function(t,e,i){var o=i(7990),s=/^\s+/;function n(t){return t?t.slice(0,o(t)+1).replace(s,""):t}t.exports=n},1957:function(t,e,i){var o="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;t.exports=o},9607:function(t,e,i){var o=i(2705),s=Object.prototype,n=s.hasOwnProperty,r=s.toString,a=o?o.toStringTag:void 0;function c(t){var e=n.call(t,a),i=t[a];try{t[a]=void 0;var o=!0}catch(c){}var s=r.call(t);return o&&(e?t[a]=i:delete t[a]),s}t.exports=c},2333:function(t){var e=Object.prototype,i=e.toString;function o(t){return i.call(t)}t.exports=o},5639:function(t,e,i){var o=i(1957),s="object"==typeof self&&self&&self.Object===Object&&self,n=o||s||Function("return this")();t.exports=n},7990:function(t){var e=/\s/;function i(t){var i=t.length;while(i--&&e.test(t.charAt(i)));return i}t.exports=i},3279:function(t,e,i){var o=i(3218),s=i(7771),n=i(4841),r="Expected a function",a=Math.max,c=Math.min;function u(t,e,i){var u,d,h,p,f,l,g=0,v=!1,y=!1,m=!0;if("function"!=typeof t)throw new TypeError(r);function x(e){var i=u,o=d;return u=d=void 0,g=e,p=t.apply(o,i),p}function I(t){return g=t,f=setTimeout(M,e),v?x(t):p}function b(t){var i=t-l,o=t-g,s=e-i;return y?c(s,h-o):s}function w(t){var i=t-l,o=t-g;return void 0===l||i>=e||i<0||y&&o>=h}function M(){var t=s();if(w(t))return S(t);f=setTimeout(M,b(t))}function S(t){return f=void 0,m&&u?x(t):(u=d=void 0,p)}function L(){void 0!==f&&clearTimeout(f),g=0,u=l=d=f=void 0}function C(){return void 0===f?p:S(s())}function O(){var t=s(),i=w(t);if(u=arguments,d=this,l=t,i){if(void 0===f)return I(l);if(y)return clearTimeout(f),f=setTimeout(M,e),x(l)}return void 0===f&&(f=setTimeout(M,e)),p}return e=n(e)||0,o(i)&&(v=!!i.leading,y="maxWait"in i,h=y?a(n(i.maxWait)||0,e):h,m="trailing"in i?!!i.trailing:m),O.cancel=L,O.flush=C,O}t.exports=u},3218:function(t){function e(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=e},7005:function(t){function e(t){return null!=t&&"object"==typeof t}t.exports=e},3448:function(t,e,i){var o=i(4239),s=i(7005),n="[object Symbol]";function r(t){return"symbol"==typeof t||s(t)&&o(t)==n}t.exports=r},7771:function(t,e,i){var o=i(5639),s=function(){return o.Date.now()};t.exports=s},4841:function(t,e,i){var o=i(7561),s=i(3218),n=i(3448),r=NaN,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt;function h(t){if("number"==typeof t)return t;if(n(t))return r;if(s(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=s(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=o(t);var i=c.test(t);return i||u.test(t)?d(t.slice(2),i?2:8):a.test(t)?r:+t}t.exports=h},9905:function(t,e,i){"use strict";var o=i(8262),s=i(6294);e["Z"]={data(){return{favorite:JSON.parse(localStorage.getItem("favorite"))||[],favoriteId:JSON.parse(localStorage.getItem("favoriteId"))||[],resentlyViewdProducts:JSON.parse(localStorage.getItem("resentlyViewdProducts"))||[]}},watch:{favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))},deep:!0},favoriteId:{handler(){localStorage.setItem("favoriteId",JSON.stringify(this.favoriteId))},deep:!0},resentlyViewdProducts:{handler(){localStorage.setItem("resentlyViewdProducts",JSON.stringify(this.resentlyViewdProducts))},deep:!0}},methods:{...(0,o.nv)(s.Z,["pushMsg"]),toggleFavorite(t){const e=this.favorite.findIndex((e=>e.id===t.id));-1===e?(this.favorite.push(t),this.favoriteId.push(t.id),this.pushMsg(!0,"收藏","已成功收藏")):(this.favorite.splice(e,1),this.favoriteId.splice(e,1),this.pushMsg(!1,"收藏","已取消收藏"))},resentlyViewed(t){const e=this.resentlyViewdProducts.findIndex((e=>e.id===t.id));-1===e?(this.resentlyViewdProducts.unshift(t),this.resentlyViewdProducts.length>10&&this.resentlyViewdProducts.pop()):-1!==e&&(this.resentlyViewdProducts.splice(e,1),this.resentlyViewdProducts.unshift(t))}}}},4677:function(t,e,i){"use strict";var o=i(9669),s=i.n(o),n=i(8262),r=i(3279),a=i.n(r),c=i(6294);const u=(0,c.Z)();e["Z"]=(0,n.Q_)("cartStore",{state:()=>({cartData:{carts:[],final_total:""},coupon_code:""}),actions:{getCartList(){u.isBounced=!0,s().get("https://vue3-course-api.hexschool.io/v2/api/zy123/cart").then((t=>{this.cartData=t.data.data,u.isBounced=!1})).catch((()=>{u.pushMsg(!1,"載入","請重新整理")}))},updateCart(t,e=1){t.qty<=1?t.qty=1:t.qty>=t.product.inventory&&(t.qty=t.product.inventory),s().put(`https://vue3-course-api.hexschool.io/v2/api/zy123/cart/${t.id}`,{data:{product_id:t.product.id,qty:Number(t.qty)}}).then((t=>{this.getCartList(),u.pushMsg(t,"更新","已成功更新購書車")})).catch((()=>{u.pushMsg(!1,"更新","更新購書車失敗")}))},delCartItem(t){s()["delete"](`https://vue3-course-api.hexschool.io/v2/api/zy123/cart/${t.id}`).then((t=>{this.getCartList(),u.pushMsg(t,"刪除","已成功刪除品項")})).catch((()=>{u.pushMsg(!1,"刪除","刪除品項失敗")}))},delAllCart(t){u.isLoadingItem=t.id,s()["delete"]("https://vue3-course-api.hexschool.io/v2/api/zy123/carts").then((t=>{u.isLoadingItem="",this.getCartList(),u.pushMsg(t,"刪除","已成功刪除所有品項")})).catch((()=>{u.isLoadingItem="",u.pushMsg(!1,"刪除","刪除所有品項失敗")}))},addToCart:a()((function(t,e=1){u.isLoadingItem=t.id;let i=this.cartData.carts.filter((e=>e.product_id===t.id));i={...i[0]};const o=i.qty+e;o>t.inventory?(u.pushMsg(!1,"加入","超過庫存數量"),u.isLoadingItem=""):s().post("https://vue3-course-api.hexschool.io/v2/api/zy123/cart",{data:{product_id:t.id,qty:e}}).then((t=>{this.getCartList(),u.pushMsg(t,"加入","已成功加入購書車"),u.isLoadingItem=""})).catch((()=>{u.pushMsg(!1,"加入","加入購書車失敗")}))}),500),addCouponCode(){""===this.coupon_code?u.pushMsg(!1,"套用","你還沒填入優惠碼呢"):s().post("https://vue3-course-api.hexschool.io/v2/api/zy123/coupon",{data:{code:this.coupon_code}}).then((t=>{this.getCartList(),u.pushMsg(t,"套用","已套用優惠券")})).catch((()=>{u.pushMsg(!1,"套用","套用優惠券失敗")}))},copyCouponCode(t){navigator.clipboard.writeText(t).then((()=>{u.pushMsg(!0,"複製","您已成功複製優惠碼!"),this.coupon_code=t}))}}})},6294:function(t,e,i){"use strict";var o=i(8262);e["Z"]=(0,o.Q_)("statusStore",{state:()=>({isLoadingItem:"",isLoading:!1,isBounced:!1,messages:[],message:{}}),actions:{loadingEffect(){this.isLoading=!0,setTimeout((()=>{this.isLoading=!1}),1e3)},loadingItemEffect(){this.isLoadingItem=!0,setTimeout((()=>{this.isLoadingItem=!1}),1e3)},toastShow(){setTimeout((()=>{this.messages.shift()}),1500)},clearToast(t){this.messages.splice(t,1)},pushMsg(t=!0,e="更新",i){this.message=t?{style:"primary",title:`${e}成功`,content:i,icon:"fa-circle-check"}:{style:"danger",title:`${e}失敗`,content:i,icon:"fa-circle-xmark"},this.statusMsg(this.message)},statusMsg(t){const{style:e,title:i,content:o,icon:s}=t;this.messages.push({style:e,title:i,content:o,icon:s}),this.toastShow()}}})},9163:function(t,e,i){"use strict";t.exports=i.p+"img/loading.8a13cb6e.gif"}}]);
//# sourceMappingURL=275.bd8d1675.js.map